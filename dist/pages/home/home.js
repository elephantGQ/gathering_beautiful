"use strict";require(["../../static/conf/config.js"],function(){require(["jquery","sw","lodash"],function(u,c,a){u(function(){var o=JSON.parse(localStorage.getItem("loginUser"));o&&u(".isLogin").html("<li>".concat(o.tel,'</li><li><a href="#" class="loginOut">退出</a></li>')),u(".loginOut").click(function(){u(".isLogin").html('<li><a href="../login/login.html">请登录</a></li><li><a href="../regist/regist.html">快速注册</a></li>'),localStorage.removeItem("loginUser")}),u(".jumei").mouseover(function(){u(this).children(".sub_nav").show(),u(this).children("a").children("em").removeClass("icon-icon-arrowdown-expa").addClass("icon-icon-arrowup")}),u(".jumei").mouseout(function(){u(this).children(".sub_nav").hide(),u(this).children("a").children("em").removeClass("icon-icon-arrowup").addClass("icon-icon-arrowdown-expa")});new c(".swiper-container",{autoplay:!0,effect:"fade",loop:!0,pagination:{el:".swiper-pagination",clickable:!0,centeredSlides:!0}});u(".mzStore").mouseover(function(){u(".mzStore em").removeClass("icon-icon-arrowdown-expa").addClass("icon-icon-arrowup"),u(".mzsc").show()}),u(".mzStore").mouseout(function(){var o=!0,t=setTimeout(function(){u(".mzsc").mouseover(function(){clearTimeout(t),o=!1}),u(".mzsc").mouseout(function(){u(".mzStore em").removeClass("icon-icon-arrowup").addClass("icon-icon-arrowdown-expa"),u(".mzsc").hide()}),o&&(u(".mzStore em").removeClass("icon-icon-arrowup").addClass("icon-icon-arrowdown-expa"),u(".mzsc").hide())},1e3)}),u(".btToday").click(function(){u(".todayOpt").show(),u(".btToday").addClass("current").siblings().removeClass("current")}),u(".btTommon").click(function(){u(".todayOpt").hide(),u(".btTommon").addClass("current").siblings().removeClass("current")});var t,e,n,i=localStorage.getItem("productAccount");null==i&&(i=0),u(".cart_num").html("".concat(i)),u(window).scroll((t=function(){u(window).scrollTop()>=u("#todayNew").position().top-900&&(console.log("ajax开始了"),u.ajax({type:"GET",url:"http://localhost:8000/city",dataType:"json",success:function(o){var t=a.template(u("#temp_product").text())({data:o});u(".productlist").html(t),u(".productBox").mouseenter(function(){u(this).children(".coverOn").show()}),u(".productBox").mouseleave(function(){u(this).children(".coverOn").hide()}),u(".cartBox").click(function(){var o=u('<div id="ball"></div>');o.css({left:u(this).offset().left+40,top:u(this).offset().top-20}),u(document.body).append(o),function(t,e){var n=t.offset().left,i=t.offset().top,c=e.offset().left-n,o=i-e.offset().top,a=-.0015,r=(o-a*c*c)/c,s=0,l=setInterval(function(){s+=8,t.css({left:s+n});var o=a*s*s+r*s;t.css({top:i-o}),c<=s&&(t.css({left:e.offset().left,top:e.offset().top}),clearInterval(l),t.remove(),u(".cart_num").html(parseInt(u(".cart_num").html())+1))},20)}(o,u("#liCart"));var t=JSON.parse(u(this).parent().siblings(".proInfo").html()),e=JSON.parse(localStorage.getItem("cart")),n=localStorage.getItem("productAccount");null==n&&(n=0),n++;var i=[],c=!1;e&&e.forEach(function(o){o.pid!=t.pid||(c=!0,o.count++),i.push(o)}),c||i.push(t),localStorage.setItem("cart",JSON.stringify(i)),localStorage.setItem("productAccount",n)})}}),u(window).unbind("scroll"))},e=100,n=0,function(){var o=(new Date).getTime();e<o-n&&(t(),n=(new Date).getTime())}))})})});