"use strict";require(["../../static/conf/config.js"],function(){require(["jquery","sw","lodash"],function(u,c,r){u(function(){var o=JSON.parse(sessionStorage.getItem("loginUser"));o&&u(".isLogin").html("<li>".concat(o.tel,'</li><li><a href="#" class="loginOut">退出</a></li>'));var t=JSON.parse(localStorage.getItem("cart"));console.log(t);var e=r.template(u("#cartSmall").text())({data:t});console.log(e),u("#cart_content").html(e),u(".shopCar").mouseenter(function(){u(".shopCartBox").show(),console.log("进来了")}),u(".shopCar").mouseleave(function(){u(".shopCartBox").hide()}),u(".loginOut").click(function(){u(".isLogin").html('<li><a href="../login/login.html">请登录</a></li><li><a href="../regist/regist.html">快速注册</a></li>'),sessionStorage.removeItem("loginUser")}),u(".jumei").mouseover(function(){u(this).children(".sub_nav").show(),u(this).children("a").children("em").removeClass("icon-icon-arrowdown-expa").addClass("icon-icon-arrowup")}),u(".jumei").mouseout(function(){u(this).children(".sub_nav").hide(),u(this).children("a").children("em").removeClass("icon-icon-arrowup").addClass("icon-icon-arrowdown-expa")});new c(".swiper-container",{autoplay:!0,effect:"fade",loop:!0,pagination:{el:".swiper-pagination",clickable:!0,centeredSlides:!0}});u(".mzStore").mouseover(function(){u(".mzStore em").removeClass("icon-icon-arrowdown-expa").addClass("icon-icon-arrowup"),u(".mzsc").show()}),u(".mzStore").mouseout(function(){var o=!0,t=setTimeout(function(){u(".mzsc").mouseover(function(){clearTimeout(t),o=!1}),u(".mzsc").mouseout(function(){u(".mzStore em").removeClass("icon-icon-arrowup").addClass("icon-icon-arrowdown-expa"),u(".mzsc").hide()}),o&&(u(".mzStore em").removeClass("icon-icon-arrowup").addClass("icon-icon-arrowdown-expa"),u(".mzsc").hide())},1e3)}),u(".today_tab_content").mouseenter(function(){console.log(u(this)),u(this).find(".global_tip").show()}),u(".today_tab_content").mouseleave(function(){console.log(u(this)),u(this).find(".global_tip").hide()}),u(".btToday").click(function(){u(".todayOpt").show(),u(".btToday").addClass("current").siblings().removeClass("current")}),u(".btTommon").click(function(){u(".todayOpt").hide(),u(".btTommon").addClass("current").siblings().removeClass("current")});var n,a,s,i=localStorage.getItem("productAccount");null==i&&(i=0),u(".cart_num").html("".concat(i)),u.ajax({type:"GET",url:"http://localhost:8000/global",dataType:"json",success:function(o){console.log("今日必看请求开始了");var t=r.template(u("#mustSeeDiv").text())({data:o=o.data.card.material});u(".mustCheckOut").html(t)}}),u(window).scroll((n=function(){u(window).scrollTop()>=u("#todayNew").position().top-900&&(console.log("ajax开始了"),u.ajax({type:"GET",url:"http://localhost:8000/city",dataType:"json",success:function(o){var t=r.template(u("#temp_product").text())({data:o});u(".productlist").html(t),u(".productBox").mouseenter(function(){u(this).children(".coverOn").show()}),u(".productBox").mouseleave(function(){u(this).children(".coverOn").hide()}),u(".cartBox").click(function(){var o=u('<div id="ball"></div>');o.css({left:u(this).offset().left+40,top:u(this).offset().top-20}),u(document.body).append(o),function(t,e){var n=t.offset().left,a=t.offset().top,s=e.offset().left-n,o=a-e.offset().top,i=-.0015,c=(o-i*s*s)/s,r=0,l=setInterval(function(){r+=8,t.css({left:r+n});var o=i*r*r+c*r;t.css({top:a-o}),s<=r&&(t.css({left:e.offset().left,top:e.offset().top}),clearInterval(l),t.remove(),u(".cart_num").html(parseInt(u(".cart_num").html())+1))},20)}(o,u("#liCart"));var t=JSON.parse(u(this).parent().siblings(".proInfo").html()),e=JSON.parse(localStorage.getItem("cart")),n=localStorage.getItem("productAccount");null==n&&(n=0),n++;var a=[],s=!1;e&&e.forEach(function(o){o.pid!=t.pid||(s=!0,o.count++),a.push(o)}),s||a.push(t),localStorage.setItem("cart",JSON.stringify(a)),localStorage.setItem("productAccount",n)})}}),u(window).unbind("scroll"))},a=100,s=0,function(){var o=(new Date).getTime();a<o-s&&(n(),s=(new Date).getTime())}))})})});